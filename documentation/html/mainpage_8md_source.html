<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HSRF: Heuristic Search Research Framework: mainpage.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HSRF: Heuristic Search Research Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mainpage.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[TOC]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# 1 Motivation {#s-motivation}</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;The motivation of this project is to produce a framework to:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;- Facilitate flexible and efficient implementations of search algorithms (see \ref s-flexibility-efficiency).</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;- Facilitate gaining of insights into properties of search algorithms through a variety of means:</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    + Watching the progress of the algorithm in motion (see the [video demo](https://youtu.be/cElxLWve1Zw)).</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    + Analyzing the log of events produced by the algorithm (see the [video demo](https://youtu.be/cElxLWve1Zw)).</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    + Using policy-based design (see \ref s-policy).</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;- Enable easy production of examples that can be used for conference and classroom presentations.</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;The framework is written in `C++` (the `C++11` standard) to take advantage of both the expression power and the performance-related characteristics of this language.</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;# 2 Foundation principles {#s-principles}</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;## 2.1 Flexibility vs. efficiency {#s-flexibility-efficiency}</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;When we talk about a search algorithm such as *A\**, we usually talk about a whole large family of algorithms. These algorithms differ in many aspects: from storing different information with search nodes to handling various search conditions (e.g. inconsistency) in different ways. The programming techniques that address the need for flexibility involve a trade-off between flexibility and efficiency. Efficiency may be an important factor for the following reasons:</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;- It allows performing experiments that involve solving large problem instances, a large number of problem instances and exploring large parameter spaces.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;- It allows achieving the most fair comparison of algorithms by running each algorithm at its best.</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;- It allows to avoid comments from reviewers about non-state-of-the-art performance.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;In the remainder of this section, I provide a brief description of the mentioned trade-off and describe the way chosen by the framework.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;### 2.1.1 The trade-off {#s-tradeoff}</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;The programming language mechanisms that address the need for flexibility most directly are conditional statements and *polymorphism*. Two types of polymorphism are distinguished: *dynamic* and *static*. </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;Conditional statements and dynamic polymorphism allow us to choose execution path based on conditions that are checked at run-time. This is convenient, since the resulting executable can be used for many different experimental scenarios. However, these techniques incur performance cost. Only a small portion of this cost is due to the time taken to evaluate the conditions. A much greater performance cost may be incurred due to the fact that the need to check conditions at run-time precludes important compiler optimizations.</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;Static polymorphism (e.g. *templates* and compile-time techniques such as *tag dispatch*) provide maximal performance at the cost of the need to re-compile the program for each new configuration. </div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;### 2.1.2 The best of the two worlds {#s-configuration}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The framework chooses the middle path in the above trade-off. Namely, in the parts of the framework not directly related to producing experimental results (e.g. the tools for analysis), flexibility is achieved by run-time techniques. Where the time quality of experimental results is at stake, the performance is considered critical and compile-time techniques are used. </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;In the latter case of using compile-time techniques, flexibility is achieved by enabling configuration files consisting of preprocessor symbol definitions (see \ref s-why-symbols for the justification of this design decision). With rare exceptions, each symbol determines a behavior of the framework and is used as a default template argument somewhere in the framework. The mechanism is complemented with several convenience features:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;- The configuration file does not have to define all the symbols that appear in the framework, but only those that are actually used (i.e. those that appear in the templates that get *instantiated*). This is enabled by a special tool that takes over from the preprocessor and eliminates the unused symbols from the source before the actual compilation begins.</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;- Two features are aimed at making it easy and efficient to write scripts that explore a parameter space and perform an experiment for each parameter setting:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  - One can compile the framework and run an experiment by a single command, in which one can specify the configuration file, additional symbols for the *compile-time* configuration and command line arguments for the *run-time* configuration. </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  &lt;!-- For example, consider the following command: --&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  &lt;!--         (make run MODE=debug CPP=test.cpp CONFIG=&quot;projects/KGoal/ConfigMinHeuristic.h&quot; ADD=&quot;-DSLB_STATE=&#39;GridMapState&lt;&gt;&#39;&quot; OPT=&quot;-s ost001d.map8 -i ost001d.txt --nGoals 2 -v 50&quot;) 2&gt;err --&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  &lt;!--     Here, an experiment is being run (the `run` target is being invoked) after being compiled with debugging symbols and without optimizations (the `debug` mode; the alternative is the `production` mode). The `.cpp` file is specified next. Then we specify the configuration file and additional symbols for compile-time configuration. Lastly, command line arguments for run-time configuration appear. The output of `make` is sent to `standard error`, while the output of the framework will appear on `standard output`. --&gt;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  - The executables are cached. That is, if the current version of the framework&#39;s source code with the given compile-time configuration had ever been compiled, the executable from that previous compilation will be quickly retrieved and run. If not, the framework will be compiled and the executable will be saved for future use. The cached executables &lt;!--(named after the `md5` sum of the source code with the unused symbols removed and the compile-time configuration)--&gt; are stored in the `.execs/` directory.</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;The [video demo](https://youtu.be/cElxLWve1Zw) explains this mechanism using several sample scenarios.</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;## 2.2 Gaining understanding through policy-based design {#s-policy}</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;[Policy-based design](https://en.wikipedia.org/wiki/Policy-based_design) is a notion popularized by Andrei Alexandrescu in his seminal work [Modern C++ Design](https://en.wikipedia.org/wiki/Modern_C%2B%2B_Design). The following paragraph from the [Wikipedia article](https://en.wikipedia.org/wiki/Policy-based_design) provides a brief description of policy-based design (the italics are mine):</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;&gt; The central idiom in *policy-based design* is a class template (called the *host class*), taking several type parameters as input, which are instantiated with types selected by the user (called *policy classes*), each implementing a particular implicit interface (called a *policy*), and encapsulating some *orthogonal* (or mostly orthogonal) aspect of the behavior of the instantiated host class. By supplying a host class combined with a set of different, canned implementations for each policy, a library or module can support an *exponential number of different behavior combinations*, resolved at *compile time*, and selected by mixing and matching the different supplied policy classes in the instantiation of the host class template. Additionally, by writing a custom implementation of a given policy, a policy-based library can be used in situations requiring behaviors *unforeseen by the library implementer*. Even in cases where no more than one implementation of each policy will ever be used, decomposing a class into policies can aid the design process, by increasing modularity and *highlighting exactly where orthogonal design decisions have been made*.</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;For example, suppose that we use policy-based design to implement the *A\** search algorithm. The class implementing the algorithm becomes the *host class*. Now, we need to identify orthogonal behaviors that distinguish the various variants of the algorithm. Each such behavior becomes a *policy*. Each way to implement a policy becomes a *policy class*. For one example, we might have a policy for dealing with inconsistency and implement two policy classes: the `do_nothing` policy and the `bidirectional_pathmax (BPMX)` policy.</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;The *proposition* I would like to make is that, by gradually identifying a set of orthogonal policies (actually, a hierarchy of policies, since each policy may in turn be a host class with its own policies), we, as a research community, can arrive at a natural taxonomy of the variants of *A\** and other search algorithms. I believe that such a taxonomy would contribute greatly to our understanding of both the state of the art and the research possibilities ahead. </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;The algorithms that are already implemented in the framework show examples of using policy-based design to implement a heuristic search algorithm. Of course, examples cannot serve as proofs of the concept&#39;s applicability to all the possible search algorithms. In fact, I do not think such a proof exists. What does exist is the world-wide programming community&#39;s experience of almost two decades of using policy-based design for successfully implementing complex systems with high demands for generality, performance, flexibility and maintainability. However, anyone familiar with the existing body of search algorithms would realize that using this technology for heuristic search research will put this technology to a fascinating test.</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;Building a taxonomy as described above is a long-term (and, hopefully, communal) effort. Therefore, I did not attempt to arrive at a perfect set of policies for any algorithm. Rather, the policies will be added and refined as the different algorithms and variants are added to the framework.</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;# 3 Usage examples {#s-examples}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;The framework can be used in a great variety of ways. In particular, it comes with the \ref test.cpp module that implements three modes of operation:</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;- **Building problem instances.** In this mode, a file of random problem instances and the associated user-defined properties is produced. %and saved in the file specified by the run-time configuration. Problem instances can be configured to have user-defined properties, which can be used for post-processing analysis using bucketing and other techniques.</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;- **Running a production experiment.** In this mode, the algorithm of interest is employed to solve the specified problem instances. The produced table of results contains user-defined statistics. If per-instance results are requested, these results are sorted based on user-defined criteria associated with the instance properties.</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;- **Analyzing the algorithm.** In this mode, the algorithm&#39;s execution for solving the specified problem instance is exposed by the facilities of the user interface. These facilities allow the researcher to explore the graphical representation of the search domain (which is built by applying either an automatic or a user-defined layout), visualize the search process, build filters and perform searches to focus on the parts of the search process that provide most insight, and more. </div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;One can also use screen shots or video captures of an analysis  session for presentation and teaching purposes. The [video demo](https://youtu.be/cElxLWve1Zw) shows examples of the framework&#39;s usage. When you download the framework, it will have all the files relevant to this demo in the `projects/demo directory`.</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Lastly for this section, I would like to share an example of how the framework can help better understand search algorithms from a theoretical point of view. In a recent experimental study, it was noticed that two variants of A* resulted in vastly different sizes of the open list. None of the co-authors could think of an explanation. With the framework&#39;s help, we now have a video which shows that the *shapes* of the open lists produced by the two variants are very different. One variant produces a smoothly shaped open list, while the other one produces an open list with a large number of protrusions, which greatly increase the size of the open list. Once this direct observation was obtained, we were also able to understand why the algorithms&#39; makeup resulted in this behavior.</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;# 4 Conventions {#s-concepts}</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;This section describes the conventions knowing which will help the reader to get started on working with the framework. </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;## 4.1 The physical structure {#s-physical}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;The framework is a header-only library. Let us explore the files comprising the framework.</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;### 4.1.1 The source code {#s-source}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;The source code of the framework is organized into two directories:</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;- The `core/` directory contains the core facilities of the framework. In particular:</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  - The files with the implementation of the user interface are stored in `core/user_interface/`.</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  - The facilities that directly support the implementation of heuristic search algorithms are located in `core/search_base/`.</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  - The lower-lever facilities are located in `core/util/`.</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;- The `extensions/` directory contains the facilities contributed by the users of the framework, i.e. the researchers. Usually, these facilities are directly supported by the facilities found in `core/search_base/`.</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;- The `projects/` directory is designated for the files related to specific experiments. The files may be of many kinds: configuration files, files storing the explicit domains, problem sets etc. At this point, each project gets its own directory in `projects/`, such as the `projects/demo/` directory used in the [video demo](https://youtu.be/cElxLWve1Zw). As the number of users grow, each user might get a directory in `projects/` named after him.</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  </div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;Lastly, the root directory contains: </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;- The file \ref test.cpp, which is the default main module, which implements running an experiment with a single configuration (in either production or analysis mode) and building a file with problem instances. </div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;- The `align` utility, which is useful for aligning columns of the tables produced by several different invocations of the framework (see \ref s-single).</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;- The `symbols` utility, which is invoked automatically during the compilation to get rid of the unused preprocessor symbols as explained in \ref s-configuration.</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;### 4.1.2 The namespaces {#s-namespace}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;All of the framework&#39;s facilities live in the `slb` namespace. In addition, the framework is organized in namespaces that mimic the folder structure. Thus, for example, the search base facilities are found in the \ref slb::core::sb namespace.</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;### 4.1.3 Header files for forward declarations {#s-forward}</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;As explained in \ref s-configuration, most of the framework&#39;s facilities are implemented as template classes, whose default template arguments are determined by the compile-time configuration. Thus, it is possible for a template that implements a core facility to have a default template argument, which is a user-provided extension. If that extension in turn uses the core facility in question, a circular dependency emerges. </div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;To avoid such circular dependencies, we need to forward-declare the names corresponding to the default template arguments. For this reason, the convention is that user-provided facilities should provide a header with forward declarations. This header&#39;s name should have the suffix `_fwd.h`. For example, the Pancake Puzzle domain comes in two headers: `extensions/domains/pancake.h` and `extensions/domains/pancake_fwd.h`. </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;&lt;!-- In particular, if additional command line options are defined, the class defining them should be forward-declared.  --&gt;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;The *forward-declaration headers* must be &lt;code&gt;\#include&lt;/code&gt;-d in the final source before the core facilities as described in the next subsection.</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;### 4.1.4 The single-unit compilation model {#s-single-unit}</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;Since most of the facilities of the framework are template classes that have the search domain as one of their template parameters, separate compilation is difficult to achieve. Instead, the framework is compiled as a single translation unit. The following organization of &lt;code&gt;\#include&lt;/code&gt;-directives makes this unit easy to manage:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;- The main `.cpp` includes the configuration file (its name is given by the `CONFIG` symbol) and `slb.h`.</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;- `slb.h` includes:</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  - `outside_headers.h`, which in turn includes all the third-party facilities (i.e. the facilities coming from the standard library, the `Boost` library etc.). This header is suitable for pre-compilation, which is currently not employed. &lt;!-- I got only 25% speed-up from using pre-compilation. --&gt; </div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  - `extensions/headers_fwd.h`</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  - `core/headers.h`</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  - `extensions/headers.h`.</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;- For a directory `X/`: </div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  - `X/headers_fwd.h` includes `headers_fwd.h` from each of the sub-directories of `X`. </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  - `X/headers.h` includes: </div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   - all headers from `X/` (besides `X/headers_fwd.h` and `X/headers.h`) and </div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   - `headers.h` from each of the sub-directories of `X/`. </div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;On my computer, the framework compiles in under ten seconds.</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;## 4.2 Compile-time configuration {#s-symbols}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;The framework employs preprocessor symbols to enable compile-time configuration. Please refer to the [video demo](https://youtu.be/cElxLWve1Zw) for an initial explanation with some examples. This section provides some additional explanations.</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;### 4.2.1 Why preprocessor symbols? {#s-why-symbols}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;`C++11` contains a number of features whose aim (among other things) is to make most previously needed uses of the preprocessor directives unnecessary. There are many strong reasons for that effort and listing those reasons is beyond the scope of this page. It will suffice to quote Scott Meyers, who states in `Item 2` of [Effective C++ (3rd edition)](http://amzn.com/0321334876):</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;&gt; It&#39;s not yet time to retire the preprocessor, but you should definitely give it long and frequent vacations.</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;Unfortunately, Scott Meyers is right not only in the second part of the quote, but also in the first part. I did not find any better way to define compile-time configuration than preprocessor symbols. One obvious candidate for an alternative is to use aliases (i.e. the `using` keyword). One particular problem with aliases did not allow me to pursue that direction. Namely, there is no easy way to determine which aliases are unused. Therefore, each compile-time configuration would have to define all the aliases, even the ones not used in the current experiment. This also means that introducing a new alias would necessitate updating all the existing experiments&#39; configurations. In contrast, once the preprocessor is done, the unused symbols remain in the code and can be recognized by an automatic tool. This is precisely what the framework&#39;s `symbols` tool does.</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;### 4.2.2 Names of the preprocessor symbols {#s-symbols-conventions}</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;The framework employs the following conventions regarding the names of the preprocessor symbols:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;- The names are prefixed with `SLB_` and contain only capital letters and underscores.</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;- The names should be composed in a way that minimizes the probability of clashes with the names defined by other users. See the names of the existing user-defined symbols for examples of good names. &lt;!-- The preprocessor symbols specific to an algorithm (i.e. that are not likely to be shared between several algorithms) should have the name of that algorithm in the name. This is meant as a (poor, but necessary) substitution for name scopes. --&gt;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;## 4.3 Run-time configuration {#s-run-config}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;The framework employs the [Templatized C++ Command Line Parser Library](http://tclap.sourceforge.net/) to parse the command line. The following subsections present the framework&#39;s features related to using the command line.</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;### 4.3.1 Command line options for user-provided facilities {#s-user-cmd}</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;In addition to the standard command options (see below), the framework makes it possible to define command line options specific to user-provided facilities. For this reason, the class \ref slb::core::commandLine::CommandLine is a template that accepts a class implementing additional command line options as the template argument. See \ref slb::ext::domain::pancake::CommandLine for an example of such a class. Also, see the [video demo](https://youtu.be/cElxLWve1Zw) for an example of configuring the framework to use additional command line options.</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;One can view the standard command line options by running the following command from the root directory.</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   make run MODE=debug CPP=test.cpp CONFIG=&quot;projects/demo/grid.astar.h&quot; OPT=&quot;--help&quot;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;This particular configuration file (i.e. `projects/demo/grid.astar.h`) was chosen because it does not define any additional command line options.</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;### 4.3.2 Using the command line object {#s-singleton}</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;The class \ref slb::core::commandLine::CommandLine is a singleton. To initialize the command line object, one must call the \ref slb::core::commandLine::CommandLine&lt;&gt;::instance function, forwarding to it the `argc` and `argv` arguments of `main`. Following the initialization, the command line object can be accessed by the user-provided facilities by calling the \ref slb::core::commandLine::CommandLine&lt;&gt;::instance function without arguments. The \ref CMD macro is defined as a short-hand for calling this function. </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;There are two cases in which the command line object cannot be accessed by using the \ref CMD macro: </div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;- from the *core facilities* . This is because the classes implementing the user-provided additional command line options are only forward-declared (but not defined) by the time the compiler parses the core facilities. </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;- in order to access command line arguments defined by a user-provided facility. This is because, when the user-provided facility is not used by the particular experiment, the associated command line addition is not defined.</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;In these cases, the command line object needs to be made available through a template argument. The framework provides the macros \ref CMD_TPARAM and \ref CMD_T are provided for this purpose. For example, here is how the constructor of the Pancake&#39;s state accesses the number of pancakes supplied on the command line:</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;~~~~~~~~~~~~~~~{.c}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;template &lt;CMD_TPARAM&gt;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;Pancake() : pancakes_(CMD_T.nPancakes()) {...}</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;~~~~~~~~~~~~~~~</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;## 4.4 Producing a table of results from several invocations {#s-single}</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;When exploring a parameter space by means of a script, it may be convenient to present the results of several invocations of the framework in a single table. The framework supports this by providing several standard command line options and a tool:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;- The `--prefixTitle` option can be used to prepend the *title row* with a given string. The `--prefixData ` option can be used to prepend all the *data rows* with a given string. The script can use these options to insert extra columns into the table output by the framework. The purpose of these columns is to identify the parameter settings specific to a particular invocation of the framework. </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;- The script can use the `--hideTitle` switch to append the table of results from the first invocation of the framework by only the data rows from the consequent invocations. Namely, when the `--hideTitle` switch is specified, the title row is not shown in the output. </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;- The `align` tool can be used to align the columns of the resulting table. This makes it easy to import the table correctly into a spreadsheet. The tool takes a file name containing a table of results as a command line argument and aligns the table in place.</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;## 4.5 Algorithms, policies and communication between them {#s-crtp}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;The currently implemented algorithms employ a design solution that advocates for keeping algorithms as simple as possible without compromising generality. In particular:</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;- An algorithm should implement only the core flow of the search. The specific behaviors are to be factored out into policies.</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;- Communications between algorithms and policies should follow a similar pattern. </div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;- Common characteristics of algorithms should be factored out into abstract base algorithms, from which specific algorithms can inherit.</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;In addition, there are cases when different policies of an algorithm need to communicate with each other. The proposed design supports this communication as well. </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;The following subsections describe a design solution that supports the above requirements. For the sake of uniformness, the users are strongly advised to employ this solution for their implementations. </div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;### 4.5.1 Policy services {#s-services}</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;Each search algorithm provides *services* for its policies. These *policy services* are public member functions of the class implementing the algorithm. Implementations of policy services can be shared between several algorithms by factoring these services out into the abstract base algorithm from which the algorithms in question inherit.</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;### 4.5.2 Communication through reference to algorithm {#s-communication}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;Each class implementing a policy of a search algorithm has a constructor that accepts an algorithm reference argument and stores this reference for future use. This way, function members of the policies have an empty parameter list, but can call the services provided by the algorithm. Consequently, policy classes are templates, where the template parameter is the class implementing the search algorithm.</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;This design provides an easy way of communication between policies as well. The algorithm can support this communication by providing policy services that return references to policy classes.</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;### 4.5.3 CRTP to enable initialization of policy classes in the abstract base algorithms {#s-base-crtp}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;Using policy-based design in conjunction with abstract base algorithms as described above presents the following problem. Some policies are present in many algorithms. For example, many algorithms might have a policy for evaluating the stopping condition and maintaining the relevant data. When we factor out abstract base algorithms, these common policies become policies of the base algorithm. However, we would like these policies to have access to all the policy services provided by the actual (non-abstract) algorithms. Hence, the template classes implementing these policies need to be instantiated with the concrete algorithm&#39;s type, not the base algorithm&#39;s one.</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;To solve this problem, we use the *Curiously Recurring Template Pattern* (CRTP), whereby the abstract base algorithm has a template parameter specifying the concrete algorithm. Describing this technique is beyond the scope of this short document. The reader is referred to the [Wikipedia article](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern) for details. &lt;!--I also used [this](http://stackoverflow.com/a/35436437/2725810) and [this](http://stackoverflow.com/a/5534818/2725810) posts for further clarifications.--&gt;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;### 4.5.4 Compile-time checks to avoid unneeded branching {#s-branching}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;It is known that branching precludes significant compiler optimizations, so that avoiding unnecessary branching in implementations of search algorithms is an important efficiency concern.</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;Let us consider a particular example of such branching. Suppose that, in some variant of A* (and there are such variants), the selected node is not necessarily expanded. Furthermore, suppose that the search algorithm has a policy whose member function is called upon node selection. The regular implementation of this function does not return a value. However, the implementation for the mentioned variant returns a boolean value that indicates whether the selected node should be expanded or not. Depending on the particular policy implementation chosen by the compile-time configuration, the call to the policy&#39;s member function does or does not need to be followed by branching in the algorithm. </div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;We would like to make sure that no branching occurs in the latter case. Hence, we require that policy implementations provide information to enable compile-time checks to avoid such unnecessary branching.</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;### 4.5.5 Policy-based design and efficiency {#s-policy-efficiency}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;Policy-based design uses the template mechanism of C++. A distinguishing characteristic of C++ templates is that, once a template is instantiated with particular policies, the resulting code preserves complete type information. This code is very well suited for compiler optimizations. In fact, as the example below will show, a generic code that uses policy-based design may run faster than a hand-crafted code without templates that has the same policies hard-coded (see also page 780 of the fourth edition of &quot;The C++ Programming Language&quot; by Bjarne Stroustrup and the excellent discussion at http://stackoverflow.com/q/8925177/2725810). </div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;The author of the framework has performed an experiment, whereby the performance of the framework&#39;s generic implementation of IDA* for solving instances of the sliding-tile puzzle is compared to the performance of the well-known highly crafted code of Richard Korf. The framework&#39;s implementation can be run by the command:</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    make run MODE=production CPP=test.cpp CONFIG=&quot;projects/demo/sliding_tile.idastar.h&quot; OPT=&quot;-i projects/demo/sliding_tile.inst --perInstance&quot;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;The framework implements \ref slb::ext::domain::sliding_tile::SlidingTile &quot;the domain&quot; in such a way that the nodes are generated in the same order as they are generated by the code of Richard Korf.  Both the code of Korf and the framework were compiled with the GNU compiler using the highest optimization level (the \c -O3 switch). On my computer, the highly crafted code of Korf solved his famous set of 100 problem instances in 8 minutes and 12 seconds. The framework solved the same code in 6 minutes and 44 seconds. </div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;It must be noted that, when the code of Korf is compiled with the \c -O2 switch, it solves the set in 6 minutes and 1 second, which means that this hand-crafted code makes the additional optimizations enabled by the \c -O3 switch counter-productive. On the other hand, the superior run-time performance achieved by the code of Korf when compiled with {\tt -O2} shows that the current implementation of this experiment by the framework leaves space for improvement.</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;Achieving state-of-the-art performance in practice is not an easy task. Besides the need to choose the policies well, one needs to be very careful about correctly using (or avoiding) the language features that may affect performance, such as indirection through pointers, `const` and `constexpr` entities, `noexcept` functions and many others. This may require much insight and experimentation, but pays off in state-of-the-art performance. For example, should the only `noexcept` used in the implementation of the \ref sliding_tile.h &quot;sliding-tile domain&quot; be removed, the framework would take 10 minutes and 48 seconds to solve the same set of instances.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;### 4.5.6 Explanation of some of the currently used policies {#s-current-policies}</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;Three policies control the behavior of the algorithms derived from the abstract base algorithm \ref slb::ext::algorithm::Algorithm &quot;Algorithm&quot;:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;- **The goal handler** (\c GoalHandler_) specifies the process by which the algorithm determines whether it should halt and stores the data needed for this process. The algorithm explicitly calls the following services of the goal handler:</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    - \c logInit -- puts the goal marking event into the log of events.</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    - \c onSelect -- updates the data stored by the goal handler upon selection of a node for expansion by the search algorithm.</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    - \c done -- determines whether the search algorithm is supposed to halt at this point.</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    </div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    See the file \ref goal_handlers.h for some examples of goal handlers.</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;- **The initial heuristic** (\c InitialHeuristic_) specifies the heuristic function used to compute the heuristic value of the initial search node. Note that a separate policy is used for the initial node. In fact, the heuristic function used for the other nodes is not a policy of the algorithm, but of the generator policy described below. This is due to the fact that, unlike for other nodes, a dynamic heuristic cannot be used for the initial node. </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    The heuristic policies provide the call operator for computing the heuristic. See the file \ref heuristic_policies.h for some examples of heuristic policies.</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;- **The generator** (\c Generator_) specifies the process by which the successors (also called *neighbors*) of a state are generated. The list of successors may consist either of the neighboring states or of the actions that lead to those states. Regardless of this distinction, the algorithm or other policies (see \ref s-communication) may explicitly call the following services of the generator:</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    - \c state -- computes the state corresponding to a given neighbor (which can be an action).</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    - \c heuristic -- computes the heuristic value corresponding to a given neighbor. Overloads for both dynamic and non-dynamic heuristics are provided when relevant. As mentioned above, the heuristic function is a policy of the generator policy.</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    - \c successors -- computes the list of successors. As mentioned, this list may consist either of the neighboring states or of the actions that lead to those states.</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    See the file \ref generators.h for some examples of generator policies.</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    </div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;Besides these policies, \ref slb::ext::algorithm::Algorithm &quot;Algorithm&quot; has two template parameters (which are actually listed first in the template parameter list) -- **logFlag_** and **Node_**. These parameters determine whether the events generated by the search algorithm are logged and what data is stored with each node, respectively.</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;Algorithms derived from \ref slb::ext::algorithm::Algorithm &quot;Algorithm&quot; may use additional policies. These policies are listed last in the template parameter list of these algorithms. For example: </div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;- The \ref slb::ext::algorithm::Astar &quot;A*&quot; algorithm uses the **open list** policy called `Open_`, which determines the particular open list structure used by this algorithm. The open list policy provides the usual open list operations. See the file \ref open_list.h for an example of an open list policy. </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;- The \ref slb::ext::algorithm::IdAstar &quot;IDA*&quot; algorithm uses two additional policies:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   - The **backtracking** policy (\c BacktrackLock), which specifies what should happen on entering and exiting from the next level of recursion. This policy uses the RAII mechanism. Namely, the algorithm has to create a policy object each time before making a recursive call. Entering and exiting from the next level of recursion are handled by the policy&#39;s constructor and destructor, respectively. See the file \ref backtrack_lock.h for some examples of backtracking policies.</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    - The **pruning** policy (\c Pruning), which specifies how the algorithm is to determine whether a successor can be pruned. Note that we are not talking about the pruning based on the cost threshold of the current iteration, which is done by the algorithm itself. See the file \ref pruning.h for some examples of pruning policies.</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;## 4.6 Events and the logging function {#s-events}</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;Each algorithm implementation can define event classes. An event object (which is an instance of an event class) describes something that happened during the algorithm&#39;s execution, such as node selection, node generation etc. The event classes must inherit, either directly or indirectly, from \ref slb::core::ui::EventBase. This enables storing events of different types in the event log, which in turn enables the capabilities of the framework for visualizing an algorithm&#39;s execution and analyzing its behavior. See the [video demo](https://youtu.be/cElxLWve1Zw) for some examples of these capabilities. </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;To store an event in the even log, the heuristic search algorithm needs to call the \ref slb::core::ui::log &quot;logging function&quot;, specifying the desired event type as an explicit template argument. The first two arguments supplied by the call are the reference to the event log and the search node pointer. An overload exists for accepting a unique pointer to the node instead of a raw pointer. Since the logging function is a template, the type of both the log and the search node are automatically deduced by the compiler. There is also a third optional argument, which we designate as the *parent substitution node*. The idea is that, sometimes, events concern both a node and second node other than the first node&#39;s parent. For example, when a non-optimal path to a state is discovered by the A* algorithm (see line 223 in the source code of \ref astar.h), this needs to be reflected during the visualization without changing the parent of the node that is already stored  in the open/closed list. In this case, the current node would be passed as the *parent substitution node*. </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;To make sure that no logging-related run-time overhead is incurred in production runs, the logging function employs *tag dispatch* to choose one of two behaviors *at compile time* based on the compile-time configuration: </div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;- Do nothing. (In this case, the call is totally eliminated by inlining and no run-time overhead at all is incurred.)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;- Construct an event based on the function arguments and add that event into the log. </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;The function \ref slb::ext::algorithm::Astar::run &quot;Astar::run&quot; provides several examples of how events are logged in the existing code.</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;&lt;!-- Each event defines a visualization effect. It is convenient to derive the events from pre-made bases, which correspond to different kinds of visualization effects. The existing bases are defined in \ref event_types.h and the existing events are defined in \ref events.h. --&gt;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;## 4.7 Managed search nodes {#s-nodes}</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;*Managed search nodes* are yet another convenience that was achieved through the use of macros. A managed search node inherits from \ref slb::core::sb::ManagedNode and is endowed with [reflection capabilities](http://stackoverflow.com/a/11744832/2725810), which the framework uses to define universal output operators. Please refer to \ref node_kinds.h for examples of defining managed search nodes. </div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;&lt;!-- In particular, this alleviates the need to define an output operator for that node. In addition, the framework is capable to compare the contents of two managed node and produce a string that summarizes the differences. These reflection capabilities come very handy for the textual log analysis tool. --&gt;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;## 4.8 Data structures {#s-structures}</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;The basic data structures are provided by the standard library, the Boost library, as well as many others. These libraries can be freely included and used in the user-provided extensions.</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;The framework&#39;s philosophy towards the data structures directly relevant to implementing the search algorithms is bi-directional. *On the one hand*, the framework aims to provide a small set of such data structures. At present, this set is really minimal. However, the very next research project on the author&#39;s agenda is the comparison of the various open list implementations based on the facilities present in the various freely available C++ libraries. This would include both generic implementations and implementations for specific circumstances, such as uniform-cost search. *On the other hand*, the framework leaves full freedom to the researcher to provide his own data structures as extensions. It is also possible that some of these extensions will become part of the core in later versions of the framework.</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;# 5 Installation {#s-install}</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;The framework is intended to be used with `Linux`. The instructions in this section have been tested on a fresh standard installation of `Ubuntu 16.04`.</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;The following actions need to be taken to prepare and run the framework: </div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;1. Download and extract the framework. Enter the framework&#39;s folder.</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;2. Make sure that the `COMPILER` variable in `Makefile` contains the correct path to version 4.9 or newer of `g++` (that&#39;s when `g++` began to fully support regular expressions). </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;3. Install `xlib`:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      sudo apt-get install libx11-dev</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;4. Install `cairo`:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      sudo apt-get install libcairo2-dev</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;5. Make sure that the `CAIRO_PATH` variable in `Makefile` contains the correct path to `cairo.h`.</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;6. Download and extract the [Boost](http://www.boost.org/users/download/) library. The framework has been tested with version 1.61.0 of Boost.</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;7. Set the `BOOST_PATH` variable in `Makefile` to point to the `Boost` directory.</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;8. Install `ncurses`:</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      sudo apt-get install libncurses5-dev</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;That&#39;s it! Now it&#39;s time to check the framework out by running the examples from the [video demo](https://youtu.be/cElxLWve1Zw)!</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;\note Currently keyboard events are caught only when the graphical window is active.</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;# 6 Other related software {#s-related}</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;The software frameworks written in `C++` most similar in purpose to this framework are [HOG2](https://github.com/nathansttt/hog2) by Nathan Sturtevant and the [Research Code for Heuristic Search](https://github.com/eaburns/search) by Ethan Burns. There is also the [Combinatorial Search for Java](https://github.com/matthatem/cs4j) written by Matthew Hatem in `Java`. All these frameworks aim for both performance and flexibility. In addition, `HOG2` and the `Research Code for Heuristic Search` are capable of producing visualizations, at least for some domains. However, all three frameworks lack proper documentation, so that one has to understand them from the source code. In addition, my framework provides the following features that are, to the best of my knowledge, not part of any existing framework:</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  + Support for analysis of user-provided implementation of search algorithms.</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  + Support for visualization of non-grid domains with either user-supplied or automatic layout.</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  + Support for compile-time configuration and scripting.</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  + The idea of gaining understanding through policy-based design is, to the best of my knowledge, also new in this framework.</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;Several other projects that are less related to this framework are:</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;- [OCaml Search Code](https://github.com/jordanthayer/ocaml-search) by Jordan Thayer. This framework is written in `OCaml` and has not been updated since 2012, when the group switched to `C++` for performance reasons.</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;- [The Boost Graph Library](http://www.boost.org/doc/libs/1_61_0/libs/graph/doc/). `BGL` provides several algorithms for searching in graphs. </div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;- [PSVN](https://era.library.ualberta.ca/downloads/7m01bn08g) by Robert Holte.</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;- [Fast Downward](http://www.fast-downward.org/) by Malte Helmert.</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;# 7 Version and license information {#s-version}</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;\version 0.1</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;\author Meir Goldenberg (mgoldenbe@gmail.com)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;\copyright MIT License</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;\warning Boost, Cairo and the Templatized C++ Command Line Parser Library come with their respective licenses. </div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;# 8 Bug reports and future work {#s-future}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;Please send bug reports and feature requests to the author. The current list of requested features and bug reports can be found in the files `future.org` and `bugs.org` in the framework&#39;s root folder.</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 26 2017 12:53:00 for HSRF: Heuristic Search Research Framework by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
